file (GLOB REALIZABLE_FILES "${CMAKE_CURRENT_SOURCE_DIR}/tlsf/realizable/*.tlsf")
file (GLOB UNREALIZABLE_FILES "${CMAKE_CURRENT_SOURCE_DIR}/tlsf/unrealizable/*.tlsf")

foreach (TLSF_FILE ${REALIZABLE_FILES})
    get_filename_component (BASE_NAME ${TLSF_FILE} NAME)
    add_test (NAME "test_realizable_${BASE_NAME}" WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/run_tests.sh ${TARGET_BINARY} ${PROJECT_SOURCE_DIR} ${TLSF_FILE} REALIZABLE)
endforeach()
foreach (TLSF_FILE ${UNREALIZABLE_FILES})
    get_filename_component (BASE_NAME ${TLSF_FILE} NAME)
    add_test (NAME "test_unrealizable_${BASE_NAME}" WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/run_tests.sh ${TARGET_BINARY} ${PROJECT_SOURCE_DIR} ${TLSF_FILE} UNREALIZABLE)
endforeach()
